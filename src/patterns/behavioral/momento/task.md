Create an history of AC changes with possibility to roll it back

Create snapshots for `factoryState` and `pointOfRestoration`
